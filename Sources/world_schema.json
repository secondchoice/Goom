{
  "$schema": "http://json-schema.org/test",
  "$id": "http://example.com/root.json",
  "type": "object",
  "title": "World",
  "definitions": {
    "vector": {
      "type": "array",
      "length": 2,
      "items": {
        "type": "number"
      }
    },
    "segment": {
      "type": "array",
      "length": 2,
      "items": {
        "$ref": "#/definitions/vector"
      }
    },
    "texture_ref": {
      "type": "integer",
    },
    "floor_ref": {
      "type": "integer",
    },
    "floor_part": {
      "type": "object",
      "required": [
        "texture",
        "height"
      ],
      "properties": {
        "texture": {
          "type": "integer"
        },
        "height": {
          "type": "number"
        }
      }
    },
    "wall_part": {
      "type": "object",
      "required": [
        "uv",
        "texture"
      ],
      "properties": {
        "uv": {
          "$ref": "#/definitions/segment"
        },
        "texture": {
          "$ref": "#/definitions/texture_ref"
        }
      }
    }
  },
  "required": [
    "floors",
    "walls"
  ],
  "properties": {
    "floors": {
      "$id": "#/properties/floors",
      "type": "array",
      "items": {
        "$id": "#/properties/floors/items",
        "type": "object",
        "required": [
          "id",
          "top",
          "bottom"
        ],
        "properties": {
          "id": {
            "$id": "#/properties/floors/items/id",
            "$ref": "#/definitions/floor_ref"
          },
          "top": {
            "$ref": "#/definitions/floor_part"
          },
          "texture": {
            "$ref": "#/definitions/floor_part"
          }
        }
      }
    },
    "walls": {
      "$id": "#/properties/walls/items",
      "type": "array",
      "items": {
        "$id": "#/properties/walls/items/wall",
        "type": "object",
        "required": [
          "base",
          "top",
          "bottom",
          "leftFloor",
          "rightFloor"
        ],
        "properties": {
          "base": {
            "$ref": "#/definitions/segment"
          },
          "top": {
            "$ref": "#/definitions/wall_part"
          },
          "leftFloor": {
            "$ref": "#/definitions/floor_ref"
          },
          "rightFloor": {
            "$ref": "#/definitions/floor_ref"
          }
        }
      }
    }
  }
}